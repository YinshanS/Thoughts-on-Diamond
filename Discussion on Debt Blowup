{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {
    "toc": true
   },
   "source": [
    "<h1>Table of Contents<span class=\"tocSkip\"></span></h1>\n",
    "<div class=\"toc\"><ul class=\"toc-item\"><li><span><a href=\"#Discussion-on-Debt-Blowup:-Restrictions-on-$\\sigma$-and-$\\delta$\" data-toc-modified-id=\"Discussion-on-Debt-Blowup:-Restrictions-on-$\\sigma$-and-$\\delta$-1\"><span class=\"toc-item-num\">1&nbsp;&nbsp;</span>Discussion on Debt Blowup: Restrictions on $\\sigma$ and $\\delta$</a></span><ul class=\"toc-item\"><li><span><a href=\"#Constant-Young-Marginal-Utility\" data-toc-modified-id=\"Constant-Young-Marginal-Utility-1.1\"><span class=\"toc-item-num\">1.1&nbsp;&nbsp;</span>Constant Young Marginal Utility</a></span><ul class=\"toc-item\"><li><span><a href=\"#Conclusion:-$R^f>1$-if-$\\sigma$-is-small-and-$A$-is-large.\" data-toc-modified-id=\"Conclusion:-$R^f>1$-if-$\\sigma$-is-small-and-$A$-is-large.-1.1.1\"><span class=\"toc-item-num\">1.1.1&nbsp;&nbsp;</span>Conclusion: $R^f&gt;1$ if $\\sigma$ is small and $A$ is large.</a></span></li><li><span><a href=\"#Derivation\" data-toc-modified-id=\"Derivation-1.1.2\"><span class=\"toc-item-num\">1.1.2&nbsp;&nbsp;</span>Derivation</a></span></li></ul></li></ul></li><li><span><a href=\"#Log-Utility\" data-toc-modified-id=\"Log-Utility-2\"><span class=\"toc-item-num\">2&nbsp;&nbsp;</span>Log Utility</a></span></li><li><span><a href=\"#Appendix:-Assumptions,-Parameters-and-Notations\" data-toc-modified-id=\"Appendix:-Assumptions,-Parameters-and-Notations-3\"><span class=\"toc-item-num\">3&nbsp;&nbsp;</span>Appendix: Assumptions, Parameters and Notations</a></span><ul class=\"toc-item\"><li><span><a href=\"#Assumptions\" data-toc-modified-id=\"Assumptions-3.1\"><span class=\"toc-item-num\">3.1&nbsp;&nbsp;</span>Assumptions</a></span></li><li><span><a href=\"#Parameters\" data-toc-modified-id=\"Parameters-3.2\"><span class=\"toc-item-num\">3.2&nbsp;&nbsp;</span>Parameters</a></span></li><li><span><a href=\"#Notations\" data-toc-modified-id=\"Notations-3.3\"><span class=\"toc-item-num\">3.3&nbsp;&nbsp;</span>Notations</a></span></li></ul></li></ul></div>"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Discussion on Debt Blowup: Restrictions on $\\sigma$ and $\\delta$"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "A crucial thing to consider is when will debt blowup.\n",
    "\n",
    "It will blowup for sure if $R^f>1$. With explicit formula for $R^f$ as a function of the parameters and debt amount $\\delta$, we can figure out the range of debt amount (in the constant young utility case) or the range of debt-to-income ratio (in the log utility case) given $R^f\\le1$ .\n",
    "\n",
    "__In short, the government can issue more debt if the economy does not have advanced technology($A$ is small) and the 2-state risk has a large standard deviation($\\sigma$ is large) without worrying about blowup. With log utility, higher income in previous year(large $Y_{t-1}$) would also allow the government more discretion.__"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Constant Young Marginal Utility "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Conclusion: $R^f>1$ if $\\sigma$ is small and $A$ is large."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "For a more intuitive illustration, see the plot below. This plot shows the upper bound of debt amount such that $R^f\\le 1$."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "![blowup_d_ql_2s](mathematica\\blowup_d_ql_2s.png)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In the plot, $x$ represents production technology and is calculated by $$x=\\frac{\\text{expected output when capital =}\\beta }{\\beta}=\\frac{E[Q(\\beta)]}{\\beta}=\\frac{A\\beta^\\alpha}{\\beta}=A\\beta^{\\alpha-1}$$\n",
    "\n",
    "$\\sigma$ is the standard deviation of the 2-state shock in the economy."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Derivation"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Recall that \n",
    "$$R_{t}^f=\\frac{2\\alpha A(\\beta-\\delta)^\\alpha(1-\\sigma^2)(1-\\tau)}{\\beta-2\\delta+\\sqrt{(\\beta-2\\delta)^2+4(1-\\sigma^2)\\delta(\\beta-\\delta)}}$$\n",
    "\n",
    "$$\\tau=1-(\\frac{\\beta-\\delta}{\\beta})^{1-\\alpha}$$\n",
    "\n",
    "(derivation can be found [here](https://nbviewer.jupyter.org/github/braddelong/LS2019/blob/master/Finger_Exercise-Diamond_Model.ipynb).)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "If we further assume that \n",
    "$$A=x\\beta^{1-\\alpha}$$\n",
    "this would ensure that in the steady state, expected output with capital=$\\beta$, $Q(\\beta)=x$. Thus $x$ represents technology of the economy."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Combine the three equations and get\n",
    "$$R_t^f=\\frac{2\\alpha x (\\beta-\\delta)(1-\\sigma^2)}{\\beta-2\\delta+\\sqrt{(\\beta-2\\delta)^2+4(1-\\sigma^2)\\delta(\\beta-\\delta)}}$$"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Solve $$R_t^f=1$$ \n",
    "under the constraint that \n",
    "$$0\\le\\delta\\le\\beta$$and get the __upper bound of debt amount without blowup__\n",
    "$$\\delta=\\frac{\\alpha \\beta x(1-\\alpha x(1-\\sigma^2))}{-1+2\\alpha x-\\alpha^2(1-\\sigma^2)x^2}$$"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Assuming $\\alpha=0.35$, $\\beta=0.495$, plot $\\delta$ against $3<x<5$, $0<\\sigma<1$, we will get the plot above. \n",
    "Mathematica cde for calculation and plotting can be found here."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Log Utility"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "For simplification we assume $\\delta_t$ is a constant share of income of the young, $\\delta_t=\\gamma Y_t$.\n",
    "\n",
    "The conclusion is very similar to the above case. The only interesting part is the place where previous shocks come in. It turns out that previous shocks come in only by affecting income in the base case, which in turn affect the maximum debt-to-income ratio such that debt won't blowup."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "![blowup_d_log_2s](mathematica/blowup_d_log_2s.png)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Recall that\n",
    "$$R_{t}^f=\\frac{2\\alpha A(\\beta-\\gamma)^\\alpha(1-\\sigma^2)(1-\\tau_t)Y_{t-1}^{\\alpha-1}}{\\beta-2\\gamma+\\sqrt{(\\beta-2\\gamma)^2+4(1-\\sigma^2)\\gamma(\\beta-\\gamma)}}$$\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Let $Y_{t}^*$ denote the income of the young at time $t$ in the base case, then\n",
    "$$\\tau=1-(\\frac{\\beta-\\gamma}{\\beta}\\frac{Y_{t-1}}{Y_{t-1}}^*)^{1-\\alpha}$$\n",
    "\n",
    "\n",
    "(derivation can be found [here](https://nbviewer.jupyter.org/github/YinshanS/Thoughts-on-Diamond/blob/master/Log%20Utility%20Risk%20Free%20Rate.ipynb#I.-Log-utility-and-2-state-uncertainty).)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Further assuming \n",
    "$$A=x\\beta^{1-\\alpha}$$\n",
    "we have \n",
    "$$R_t^f=\\frac{2\\alpha x (\\beta-\\gamma)(1-\\sigma^2)(Y_{t-1}^*)^{\\alpha-1}}{\\beta-2\\gamma+\\sqrt{(\\beta-2\\gamma)^2+4(1-\\sigma^2)\\gamma(\\beta-\\gamma)}}$$"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Solve $$R_t^f=1$$ \n",
    "under the constraint that \n",
    "$$0\\le\\gamma\\le\\beta$$and get the __upper bound of debt to income ratio without blowup__\n",
    "$$\\gamma=\\frac{\\alpha \\beta xY_{t-1}^*(1-\\alpha xY_{t-1}^*(1-\\sigma^2))}{-1+2\\alpha xY_{t-1}^*-\\alpha^2(1-\\sigma^2)(xY_{t-1}^*)^2}$$"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Appendix: Assumptions, Parameters and Notations"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Assumptions "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "1. Cobb-Douglas Production function:\n",
    "    $$ Y_t=A_0(1+\\epsilon_t)K_{t-1}^\\alpha$$\n",
    "2. 2-State Shock:\n",
    "    $\\epsilon=\\pm \\sigma$ with equal probability a half."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Parameters "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "$T = 200$; (Number of generations in each simulation)\n",
    "\n",
    "$\\sigma = 0.4$; (Standard deviation of shock)\n",
    "\n",
    "$\\alpha = 0.35$; (Share of capital in production function)\n",
    "\n",
    "$\\beta = 0.495$; (Discount factor of utility when old)\n",
    "\n",
    "$K_0 = \\beta$; (Initial capital, assumed same as the steady state without policy)\n",
    "\n",
    "$A_0 = \\frac{10}{3*\\beta^{\\alpha-1}}$; (Parameter in production function, set to make $\\frac{Y}{K}=\\frac{10}{3}$ in expectation) \n",
    "\n",
    "$shock = \\pm 1$ with equal probability $\\frac{1}{2}$; (Realized value of shock)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Notations"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "$Q_t$: output at time $t$;\n",
    "\n",
    "$Y_t$: income of the young at time $t$;\n",
    "\n",
    "$K_t$: capital investment by the young at time $t$, used as production capital at time $t+1$;\n",
    "\n",
    "$R_t^f$ or $rsb(t)$: risk-free interest rate for debt borrowed at time $t-1$, realized at time $t$.\n",
    "\n",
    "$R_t$: return rate on risky capital invested at time $t-1$, realized at time $t$. "
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.5"
  },
  "latex_envs": {
   "LaTeX_envs_menu_present": false,
   "autoclose": true,
   "autocomplete": true,
   "bibliofile": "biblio.bib",
   "cite_by": "apalike",
   "current_citInitial": 1,
   "eqLabelWithNumbers": true,
   "eqNumInitial": 1,
   "hotkeys": {
    "equation": "Ctrl-E",
    "itemize": "Ctrl-I"
   },
   "labels_anchors": false,
   "latex_user_defs": false,
   "report_style_numbering": true,
   "user_envs_cfg": true
  },
  "toc": {
   "base_numbering": 1,
   "nav_menu": {},
   "number_sections": true,
   "sideBar": true,
   "skip_h1_title": false,
   "title_cell": "Table of Contents",
   "title_sidebar": "Contents",
   "toc_cell": true,
   "toc_position": {},
   "toc_section_display": true,
   "toc_window_display": true
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
